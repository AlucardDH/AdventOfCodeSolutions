var input_stacks = [
    [' ',' ','M',' ','B',' ',' ',' ','N',],
    ['T',' ','H',' ','V','Q',' ',' ','H',],
    ['Q',' ','N',' ','H','W','T',' ','Q',],
    ['V',' ','P','F','Q','P','C',' ','R',],
    ['C',' ','D','T','N','N','L','S','J',],
    ['D','V','W','R','M','G','R','N','D',],
    ['S','F','Q','Q','F','F','F','Z','S',],
    ['N','M','F','D','R','C','W','T','M',]
];

var input_actions = [
    {from:8,to:7,count:1},{from:2,to:7,count:1},{from:9,to:8,count:6},{from:9,to:1,count:1},{from:9,to:1,count:1},{from:3,to:6,count:3},{from:3,to:9,count:3},{from:9,to:2,count:1},{from:7,to:9,count:5},{from:1,to:6,count:9},{from:4,to:9,count:3},{from:9,to:2,count:2},{from:4,to:2,count:1},{from:3,to:9,count:1},{from:9,to:4,count:8},{from:6,to:7,count:14},{from:3,to:2,count:1},{from:4,to:2,count:5},{from:5,to:7,count:5},{from:2,to:1,count:4},{from:4,to:9,count:2},{from:4,to:3,count:1},{from:5,to:7,count:3},{from:8,to:6,count:1},{from:8,to:7,count:2},{from:1,to:2,count:2},{from:9,to:7,count:1},{from:1,to:3,count:2},{from:6,to:5,count:5},{from:5,to:7,count:4},{from:8,to:4,count:3},{from:7,to:1,count:20},{from:7,to:5,count:11},{from:6,to:9,count:1},{from:9,to:2,count:3},{from:1,to:9,count:12},{from:8,to:3,count:2},{from:2,to:8,count:4},{from:2,to:1,count:8},{from:8,to:9,count:4},{from:2,to:5,count:1},{from:9,to:7,count:12},{from:4,to:9,count:4},{from:9,to:5,count:4},{from:5,to:4,count:13},{from:4,to:7,count:4},{from:7,to:9,count:1},{from:9,to:5,count:2},{from:1,to:2,count:9},{from:8,to:3,count:1},{from:4,to:2,count:5},{from:3,to:6,count:1},{from:2,to:8,count:7},{from:1,to:6,count:6},{from:8,to:7,count:6},{from:2,to:1,count:6},{from:9,to:3,count:3},{from:3,to:7,count:7},{from:4,to:9,count:4},{from:8,to:9,count:1},{from:3,to:9,count:1},{from:2,to:4,count:1},{from:9,to:6,count:1},{from:1,to:9,count:5},{from:4,to:9,count:1},{from:9,to:1,count:2},{from:6,to:7,count:8},{from:9,to:7,count:4},{from:5,to:2,count:2},{from:1,to:9,count:2},{from:7,to:4,count:14},{from:7,to:2,count:22},{from:7,to:4,count:2},{from:7,to:5,count:3},{from:4,to:7,count:9},{from:2,to:4,count:6},{from:4,to:3,count:8},{from:2,to:9,count:14},{from:3,to:9,count:2},{from:2,to:9,count:3},{from:4,to:2,count:4},{from:4,to:5,count:1},{from:1,to:4,count:1},{from:7,to:8,count:5},{from:1,to:3,count:1},{from:5,to:2,count:4},{from:3,to:9,count:6},{from:3,to:4,count:1},{from:8,to:9,count:4},{from:4,to:6,count:2},{from:5,to:3,count:4},{from:7,to:6,count:1},{from:8,to:5,count:1},{from:3,to:1,count:3},{from:9,to:5,count:33},{from:2,to:1,count:5},{from:3,to:5,count:1},{from:7,to:6,count:1},{from:5,to:1,count:18},{from:2,to:8,count:1},{from:5,to:4,count:6},{from:8,to:7,count:1},{from:4,to:1,count:2},{from:1,to:2,count:4},{from:1,to:2,count:19},{from:6,to:8,count:4},{from:1,to:8,count:4},{from:2,to:9,count:14},{from:2,to:4,count:5},{from:8,to:2,count:1},{from:2,to:5,count:8},{from:8,to:4,count:5},{from:9,to:7,count:4},{from:8,to:1,count:1},{from:5,to:4,count:16},{from:4,to:5,count:15},{from:9,to:5,count:1},{from:7,to:6,count:5},{from:7,to:6,count:2},{from:1,to:9,count:1},{from:6,to:7,count:7},{from:8,to:5,count:1},{from:1,to:9,count:1},{from:5,to:7,count:12},{from:5,to:9,count:7},{from:7,to:2,count:12},{from:7,to:4,count:1},{from:4,to:7,count:7},{from:9,to:4,count:2},{from:4,to:9,count:5},{from:2,to:3,count:8},{from:2,to:4,count:4},{from:4,to:8,count:9},{from:3,to:5,count:6},{from:7,to:3,count:8},{from:4,to:3,count:1},{from:8,to:9,count:7},{from:5,to:4,count:4},{from:3,to:1,count:6},{from:3,to:4,count:4},{from:3,to:6,count:1},{from:4,to:9,count:6},{from:6,to:5,count:1},{from:9,to:4,count:17},{from:7,to:3,count:3},{from:7,to:9,count:1},{from:5,to:3,count:2},{from:1,to:3,count:2},{from:8,to:9,count:2},{from:5,to:1,count:1},{from:4,to:5,count:14},{from:3,to:2,count:2},{from:7,to:6,count:1},{from:9,to:4,count:10},{from:9,to:4,count:12},{from:4,to:5,count:9},{from:2,to:9,count:1},{from:5,to:9,count:13},{from:5,to:1,count:2},{from:2,to:9,count:1},{from:4,to:2,count:3},{from:4,to:7,count:12},{from:5,to:7,count:8},{from:1,to:9,count:1},{from:6,to:4,count:1},{from:5,to:4,count:1},{from:4,to:8,count:1},{from:3,to:4,count:5},{from:9,to:6,count:10},{from:6,to:2,count:3},{from:6,to:5,count:7},{from:5,to:4,count:6},{from:8,to:5,count:1},{from:1,to:4,count:1},{from:7,to:2,count:2},{from:4,to:9,count:5},{from:5,to:8,count:2},{from:1,to:3,count:1},{from:1,to:7,count:2},{from:7,to:9,count:6},{from:9,to:8,count:9},{from:1,to:3,count:1},{from:2,to:7,count:4},{from:7,to:3,count:11},{from:8,to:6,count:11},{from:3,to:1,count:7},{from:7,to:2,count:4},{from:2,to:9,count:3},{from:1,to:5,count:8},{from:7,to:5,count:2},{from:2,to:9,count:2},{from:3,to:9,count:2},{from:4,to:7,count:11},{from:9,to:5,count:7},{from:6,to:5,count:6},{from:2,to:9,count:2},{from:2,to:3,count:1},{from:9,to:4,count:6},{from:9,to:1,count:3},{from:3,to:5,count:4},{from:7,to:1,count:6},{from:6,to:3,count:2},{from:9,to:2,count:2},{from:3,to:2,count:3},{from:6,to:8,count:3},{from:7,to:5,count:2},{from:5,to:6,count:20},{from:5,to:1,count:8},{from:5,to:9,count:1},{from:8,to:4,count:2},{from:8,to:7,count:1},{from:1,to:8,count:16},{from:8,to:9,count:8},{from:2,to:4,count:4},{from:1,to:5,count:1},{from:5,to:4,count:1},{from:8,to:4,count:3},{from:4,to:6,count:14},{from:8,to:7,count:5},{from:7,to:8,count:6},{from:6,to:2,count:29},{from:9,to:8,count:3},{from:2,to:3,count:21},{from:8,to:3,count:1},{from:9,to:4,count:6},{from:3,to:5,count:8},{from:8,to:4,count:7},{from:3,to:9,count:7},{from:7,to:2,count:3},{from:4,to:8,count:12},{from:3,to:1,count:2},{from:9,to:1,count:2},{from:6,to:7,count:1},{from:7,to:6,count:1},{from:6,to:3,count:1},{from:1,to:8,count:3},{from:4,to:1,count:2},{from:6,to:1,count:4},{from:2,to:7,count:5},{from:1,to:2,count:1},{from:1,to:2,count:5},{from:8,to:1,count:2},{from:4,to:5,count:1},{from:8,to:4,count:9},{from:7,to:9,count:3},{from:5,to:7,count:7},{from:5,to:9,count:2},{from:9,to:2,count:4},{from:3,to:2,count:3},{from:2,to:7,count:5},{from:8,to:2,count:2},{from:7,to:3,count:2},{from:8,to:6,count:1},{from:1,to:2,count:2},{from:6,to:7,count:1},{from:8,to:1,count:1},{from:7,to:1,count:12},{from:2,to:7,count:5},{from:4,to:2,count:7},{from:4,to:1,count:2},{from:3,to:8,count:5},{from:1,to:9,count:7},{from:7,to:1,count:4},{from:1,to:5,count:7},{from:9,to:2,count:12},{from:2,to:4,count:27},{from:8,to:9,count:3},{from:2,to:5,count:6},{from:1,to:8,count:6},{from:7,to:6,count:1},{from:5,to:2,count:9},{from:9,to:2,count:3},{from:4,to:5,count:13},{from:2,to:7,count:10},{from:9,to:8,count:1},{from:5,to:7,count:11},{from:8,to:7,count:1},{from:2,to:6,count:1},{from:4,to:3,count:13},{from:7,to:4,count:23},{from:6,to:9,count:1},{from:2,to:4,count:1},{from:3,to:5,count:7},{from:9,to:8,count:1},{from:4,to:1,count:19},{from:4,to:1,count:2},{from:7,to:6,count:1},{from:4,to:5,count:1},{from:5,to:7,count:1},{from:5,to:1,count:11},{from:5,to:4,count:2},{from:6,to:9,count:2},{from:8,to:2,count:3},{from:8,to:1,count:2},{from:2,to:1,count:3},{from:9,to:5,count:1},{from:1,to:3,count:6},{from:9,to:7,count:1},{from:7,to:5,count:2},{from:8,to:6,count:2},{from:3,to:2,count:1},{from:8,to:5,count:2},{from:2,to:1,count:1},{from:4,to:1,count:3},{from:5,to:1,count:3},{from:5,to:1,count:2},{from:6,to:9,count:2},{from:9,to:6,count:1},{from:4,to:5,count:1},{from:9,to:8,count:1},{from:8,to:6,count:1},{from:1,to:6,count:8},{from:1,to:8,count:7},{from:1,to:6,count:9},{from:5,to:3,count:1},{from:8,to:4,count:3},{from:3,to:4,count:11},{from:3,to:6,count:1},{from:6,to:8,count:10},{from:1,to:6,count:13},{from:4,to:5,count:3},{from:8,to:6,count:7},{from:8,to:5,count:3},{from:5,to:3,count:6},{from:6,to:9,count:22},{from:3,to:6,count:4},{from:9,to:5,count:4},{from:1,to:5,count:1},{from:3,to:4,count:2},{from:1,to:5,count:2},{from:9,to:2,count:1},{from:8,to:3,count:5},{from:9,to:2,count:2},{from:6,to:9,count:11},{from:2,to:7,count:3},{from:6,to:7,count:1},{from:9,to:8,count:12},{from:7,to:1,count:4},{from:4,to:8,count:12},{from:4,to:7,count:2},{from:1,to:8,count:1},{from:5,to:1,count:1},{from:8,to:4,count:19},{from:5,to:1,count:4},{from:7,to:4,count:1},{from:7,to:1,count:1},{from:3,to:4,count:3},{from:8,to:4,count:2},{from:5,to:7,count:1},{from:7,to:9,count:1},{from:1,to:8,count:8},{from:1,to:4,count:1},{from:3,to:9,count:1},{from:3,to:5,count:1},{from:5,to:2,count:1},{from:8,to:7,count:7},{from:4,to:7,count:16},{from:7,to:4,count:1},{from:8,to:2,count:3},{from:7,to:4,count:14},{from:5,to:8,count:1},{from:7,to:5,count:5},{from:4,to:5,count:16},{from:5,to:4,count:3},{from:2,to:1,count:3},{from:7,to:9,count:1},{from:4,to:2,count:11},{from:8,to:6,count:3},{from:1,to:8,count:2},{from:4,to:9,count:1},{from:5,to:1,count:18},{from:8,to:7,count:1},{from:7,to:9,count:3},{from:9,to:3,count:18},{from:6,to:9,count:3},{from:1,to:6,count:7},{from:8,to:4,count:1},{from:4,to:9,count:1},{from:6,to:4,count:3},{from:9,to:2,count:5},{from:4,to:7,count:2},{from:2,to:8,count:7},{from:7,to:3,count:1},{from:6,to:8,count:2},{from:9,to:5,count:1},{from:6,to:8,count:1},{from:4,to:8,count:1},{from:5,to:3,count:1},{from:7,to:5,count:1},{from:8,to:7,count:8},{from:2,to:6,count:10},{from:9,to:3,count:1},{from:6,to:2,count:6},{from:6,to:2,count:5},{from:2,to:7,count:7},{from:1,to:6,count:12},{from:2,to:1,count:2},{from:2,to:5,count:1},{from:7,to:6,count:4},{from:3,to:1,count:12},{from:7,to:2,count:2},{from:3,to:8,count:9},{from:2,to:6,count:1},{from:5,to:4,count:1},{from:6,to:5,count:9},{from:7,to:6,count:1},{from:4,to:9,count:1},{from:6,to:7,count:9},{from:8,to:3,count:7},{from:3,to:1,count:6},{from:8,to:3,count:4},{from:3,to:1,count:5},{from:9,to:8,count:1},{from:8,to:9,count:2},{from:5,to:7,count:5},{from:7,to:8,count:14},{from:9,to:4,count:1},{from:2,to:1,count:2},{from:5,to:3,count:3},{from:3,to:1,count:2},{from:4,to:6,count:1},{from:8,to:6,count:6},{from:8,to:3,count:6},{from:6,to:1,count:3},{from:8,to:9,count:2},{from:1,to:6,count:19},{from:9,to:3,count:3},{from:3,to:4,count:6},{from:6,to:2,count:6},{from:3,to:9,count:4},{from:7,to:9,count:1},{from:5,to:7,count:2},{from:9,to:6,count:5},{from:7,to:2,count:6},{from:2,to:5,count:11},{from:7,to:4,count:2},{from:4,to:3,count:4},{from:4,to:8,count:2},{from:1,to:2,count:12},{from:8,to:2,count:1},{from:5,to:7,count:8},{from:4,to:9,count:2},{from:7,to:1,count:2},{from:2,to:3,count:4},{from:8,to:6,count:1},{from:1,to:5,count:1},{from:9,to:1,count:2},{from:7,to:3,count:2},{from:5,to:2,count:2},{from:5,to:7,count:1},{from:7,to:8,count:2},{from:5,to:7,count:1},{from:3,to:4,count:5},{from:1,to:7,count:3},{from:2,to:4,count:1},{from:6,to:1,count:15},{from:4,to:1,count:4},{from:2,to:3,count:4},{from:3,to:2,count:8},{from:2,to:4,count:5},{from:8,to:6,count:1},{from:8,to:9,count:1},{from:3,to:1,count:1},{from:7,to:3,count:3},{from:7,to:6,count:5},{from:2,to:9,count:4},{from:2,to:6,count:6},{from:9,to:6,count:4},{from:1,to:5,count:12},{from:4,to:1,count:6},{from:3,to:6,count:1},{from:5,to:8,count:4},{from:5,to:3,count:7},{from:8,to:2,count:3},{from:2,to:3,count:1},{from:9,to:5,count:1},{from:4,to:5,count:1},{from:8,to:5,count:1},{from:6,to:9,count:8},{from:1,to:4,count:10},{from:6,to:1,count:3},{from:3,to:6,count:9},{from:3,to:8,count:1},{from:2,to:4,count:1},{from:9,to:1,count:6},{from:1,to:4,count:1},{from:1,to:6,count:10},{from:8,to:6,count:1},{from:6,to:7,count:13},{from:2,to:1,count:1},{from:9,to:6,count:1},{from:7,to:5,count:9},{from:9,to:4,count:1},{from:7,to:1,count:3},{from:5,to:6,count:3},{from:4,to:7,count:10},{from:6,to:5,count:5},{from:4,to:5,count:3},{from:6,to:9,count:13},{from:5,to:3,count:7},{from:3,to:2,count:6},{from:6,to:4,count:5},{from:2,to:8,count:4}
];

function part1() {

    var stacks = [[],[],[],[],[],[],[],[],[],[]];
    input_stacks.forEach(row=>{
        row.forEach((v,x)=>v!=' '&&stacks[x+1].unshift(v));
    });

    input_actions.forEach(action=>{
        for(let i=0;i<action.count;i++) {
            stacks[action.to].push(stacks[action.from].pop());
        }
    });

    console.log(stacks);
    console.log(stacks.map(s=>s[0]?s.pop():'').join(''))
}

function part2() {
    
    var stacks = [[],[],[],[],[],[],[],[],[],[]];
    input_stacks.forEach(row=>{
        row.forEach((v,x)=>v!=' '&&stacks[x+1].unshift(v));
    });

    input_actions.forEach(action=>{
        var moved = [];
        for(let i=0;i<action.count;i++) {
            moved.push(stacks[action.from].pop());
        }
        for(let i=0;i<action.count;i++) {
            stacks[action.to].push(moved.pop());
        }
        stacks[action.to]
    });

    console.log(stacks);
    console.log(stacks.map(s=>s[0]?s.pop():'').join(''))
}

part2();